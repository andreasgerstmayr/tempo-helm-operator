apiVersion: tempo.grafana.com/v1alpha1
kind: TempoMicroservices
metadata:
  name: sample
spec:
  chart: tempo-distributed
  values:
    server:
      tls:
        enabled: true
        mtls: true
    traces:
      otlp:
        grpc:
          enabled: true
    queryFrontend:
      query:
        enabled: true
    multitenancyEnabled: true
    observatorium:
      enabled: true
      tls:
        cert: observatorium-public-certs
      openshift:
        enabled: true
      route:
        enabled: true
      tenants:
      - name: dev
        id: "1610b0c3-c509-4592-a256-a1871353dbfa"
        openshift:
          cookieSecret: wdDjci39YLmn7TNmQVSriUuJDu4JXi88
      - name: prod
        id: "1610b0c3-c509-4592-a256-a1871353dbfb"
        openshift:
          cookieSecret: wdDjci39YLmn7TNmQVSriUuJDu4JXi89
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: observatorium-public-ca
data:
  ca.crt: |
    -----BEGIN CERTIFICATE-----
    MIIFBzCCAu+gAwIBAgIUYuZ8dq43bMvG4nJ92K1pFOefnYUwDQYJKoZIhvcNAQEL
    BQAwEjEQMA4GA1UEAwwHRGVtbyBDQTAgFw0yNDAzMjUwMTIwMjdaGA8yMTI0MDMw
    MTAxMjAyN1owEjEQMA4GA1UEAwwHRGVtbyBDQTCCAiIwDQYJKoZIhvcNAQEBBQAD
    ggIPADCCAgoCggIBAL61uySJIFTC2JMxRoCrBniOrg8KB4/t9+814a3WrMWzRpI6
    Jf82g1IElcCFKdAmp6TnuFP0AVHheErwBqaVrjXjCzR+FSCwvkEMDhgcWdwFAS79
    MhLVYueBJigs+d2LsTjKZfBnRg3S5+A5SLil/+znDDPhqFndyNw7pVjbWSZ2hGh8
    qKwNCWNEpdCKZ8CjeD2f37I0hVcpSjMnzei2tra76xO5kCCZaH5ONMU/mLGY77dK
    JMyCBrSgnOTVWMhXHH67ljv/0+fl2yUGKrKz83LjvD0lngGpA1HGj+blfNH3+3Rq
    3NfqJ/Q7X69azNa1yFwjRtYpu0kWSKpcyqlTtoOOJDFY2yO7YIFC/VxxXp2uSwNT
    Ei1vn/js8tocxhIjz59nQDmsHbFfJYfkXjFmdSiRkbdlH9rJB2/c1wS8krTmngix
    0XL89WVVm2OKQQtpegJwgprkqO8XE/J2F76ahHa+SkMq2ANwcgntSy6f7rv5sCdd
    nTtKe7z2mCg4CE1UR8w7fAFpZoMJbsM4hkZdWgT5gLkjU6jzBRyEwoVF8XkQ4lik
    PeCEEvAMHa3cs41KQZsYJ+/L5o01IWKrMbF8Of9y1yAnEOTkI/11zRVFkzPhINad
    sbt3mXiuAtnA32x/wPPMr7/Xsqf8NWt5mtQdyJ5d2rbU1s0cHhMfk6bo5FvLAgMB
    AAGjUzBRMB0GA1UdDgQWBBTevyfnhi4pdf4VqgfJpJJsxAWj+DAfBgNVHSMEGDAW
    gBTevyfnhi4pdf4VqgfJpJJsxAWj+DAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3
    DQEBCwUAA4ICAQCVWo/d8sXgeaYfE5S32D9BOh+ZMaHp2bKorrVtlqupb5a/mGfY
    HaZCwkSfarKRfhHzpGbaYwZDdWRZhtaoBaVdwVDnWzPqXKhOM+kl8yfysoEvSAyU
    GM6aqKxkYoErLF90h/l+rn8QM5yfIWEyDX8ZE5cr3YwKwCVM7f/kE6SN00r6oXAM
    a/ITiEmIPUBqArbjO30nzk/Lj6DAqZykBixQ5XAhuRKQs0414vWPXVIJIPVsGFBT
    PsrJz5wctYaZ+F9sXOsnihdjHeN8rmhLR823N4VudPPvHwmLTa167ZxaK6tny+i0
    GNAwUtIuuexlbil1WaD1ZiBZT1CHpWrxo8M7Y3KGPGt0rxCHkI8DjiihNOPMx4Da
    BcMbgZGwseyeZHw6UCGIdfLSmwGYqwGmgJZ5uSSem6EfWjdqdtms7HLi52ja/gp/
    V3oX4kfToz0PogaS8ugclTtAqNJXReM0hwfbaNR+wAHhl+ed8vWHBnqHh4f0SeWo
    uU3F2X3j0YZeEa+3Vh0Z+GJbK6I6tA7wRtCo2EFkkonU+AOiSpozyR3WyiV9iZX7
    YivsmG+9nyTiq6CyRRYIR/avr6UTI0Tp2/PcIuU44rMB3/caU2MnZkaD+EaYc9uv
    uf5wjojiPp/++4lGgEVJjOA7Iy7njLiKfoIAPgVVy2adU4st+RFfkuD3/A==
    -----END CERTIFICATE-----
---
apiVersion: v1
kind: Secret
metadata:
  name: observatorium-public-certs
data:
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRd0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Mwd2dna3BBZ0VBQW9JQ0FRQ0ZHaWNRamw3NXRLc1kKUFQ1S2xNc2x1Z1BVNkhlSkFHazBsTVB0WXJpR1E0MTFEMWU3RXRtN1lLVVNZSnB6dHpNS1dmOG1NR1VmREF4WQo5bzNSd0ZiT3BrdWtJMEZhV25kQjVERWs0Sk1VVFI5b3NCQWlob2VqU3NwTVNhZGUrcTZoQzk0a28xU2NscHZaCjRhdDRzcUVqa3RSRyswMkNmUXFWQjR5OTdzdlBKeXdXMnZUL1EzTXpuUjZMY01VclowOUVGdGlUN1B6KzhVRUcKdkxsbW5DTXZXcENNZ0h4d0FZeW1lK2pKUEtWRW1WS0w3U1JDb2pVWmlmMVpjOU9WeWVzcVVYM09MSGQ5bDFlOApuTWhNdlZJbXR6NHJ4Qk1TODlNN1puV1Uxb2hTeGZUZzNVR2VnRmdjZ2lZZDdzM1VpN2xiTFFsd1dCRVNQNU10Ckh4aXhaQ2Y3SnlxbGUzcUpYSVpDUEpkcHJzMkYvWlV4b2FaVm83cjNCS1MvK1hHVWNvalg2NVVHblI1TzcrWEQKWkU1SXYzS3dIVHQ4Ri85cFJhTTd4YjJxd3FlOU1NTzlmR0srMyt6Y2V6VFkrNkI1eW51MGFNNytHaGk5UUdORQpSaDZiNlhaWVFKaVJaa2p1Z3VxNEVlbjE5Q24ra3V3ajQ0TXQ3UUo2MVl2Y3lQSE1mcHRUY3N3TU4wWFRnUXcvCm5rZmV1RU1aaS9jZTVmL0w4OUw0eEtXeGNmOVdVeW13MlFSU0wvMUNlSnRaTVQ5OFhwNTlOaVdDSXhxOGFCNkkKOUdkSkxWNW5RN0Ywd3RubjRJdXRXcHBpQW9VSzFJYUNySXVveUpGbWJnRDB4VzRyd3dPa3UzQlFRa2NRdUlXbgpBdTYyWExJcFJqOUpxN3gwcUFyTDZzVlhjSlFOK1FJREFRQUJBb0lDQUF6NHJlQ3ZUVXAyek50TGdhWDFUd0IxCjJzQjlxTU9YWUlsZEs2UjNjOTN5MktiMU9ES3RMVDYxZGhUZXlRS1lzcDdTUXp0Q3FXSXZrNGI2ZlRyNUxJU08KWUk0R0dRMEFCc0lMUmU1Ty9BcDFFeWZweTZLL3UxbUN0UWtlL3ZLU3llQzhSam1LR05sN1ZJUTArZGZsQ2E3cwp0T2NYZjlmbERYcFZYbVlXcnZKWTRoTTJvcng3UTI5KzR3NktEbzhTcmY4SDNuSzVISFZRaCtxckN3TDQyYlY0ClZTQzZOMVpYa2xCWndFZVhVMUJtaEV6S2J6ZVd0UWZRZ3JvY1gzMElMUFRHZFJVYUVJbVM3WndlSitlUnBqOUwKYWFITWhhTFoxQWJFanhZeW01MjhlTWRPek1Hd2hwVzlxYzhPT2kwNThqWVVZeWg1anExWmVJT0QxYTFaQWt2VAp6RWVNVktjYWRTWmtwT3hHeUoybFRPRDJXL1FOTUlZQW90eUVkdGZhQXRURk1ac2RwdVhneTVMT1FyNENCazhOCnhlWUNINHY5WTNqTXZ2UitnYlV3K2U3dm8reHZWbFBkc2VEYXZ2RzMrd1NXVzZORitrNE5EaU1lVUhkSFVwZysKMUlCYWdnaWNpMVVSVHZJeU5Ob1JNZU8xY29PQ1dpTnE2VHhudjJGeEdyellBRHExb3BzYS84V3FlNlpiajMxYwpTdWVJbExXaXJBQUJoaVgxWnpNekh0cTI3cnlvUElXZEZQYWV4WDBsaDhpaTdOdUJnSkhIZFJuYTIyckx0SUIrCkxQRGNQNXRIWHRjMlpnWkFucytld3RCSUU2QmZSYzYyU29rZ3JFVVNMYnVVU0NUcGQ3SGlOd3NMQXpQMHJJUkwKSHBHMzd2d29neHhrbnJUZGJDS3hBb0lCQVFDNDNTZGpGUk93TXViT01ldkpjaFJMTldFeGpSRzN4YTlDRlFldQpsTmpMSXN0djdiYUp3Q0NoOFB4bXhTWThvT3UxOHU0Yk84dU5NSnBrSm9XRjlRZ3NQMTBqWlk5VG1tZnJpbXpoCjBUWTJZUHZtNXJ1aHVZMDZsWkhZK2ozVzJ4OXl5NjQwQWNrZVpyQi9HOTNtTUZGdEEzTGlETlZ3SEowNFFFck0KQWova0tidElrRWdLZll5QVZRWWpCaDI3VUpDcWVkSjlGYzNUOVZ2MmtJdXFPWkpac0NIeFRPTlh4OEE4YkNLUgpyTDlMR1FQaGxTTnhheU1nSHRVMUZnOTdmVWFTWHhYUXlmeXhUMktvakU0YmxTV1NKMU5UVkh0K2xvZ1RRcURyCklZdmZWNFdrUXpaeEJsYVBKZkkyY25UY1dMbmlyV1JjOHBBUGR2VThTdEhnK2hscEFvSUJBUUM0VWZwWWYrL0UKNVZldWlReEJMZ2lvNDRzNTkwOHJSNjAyTUdEVE5Sb0RZOVU5SFlIL2FwcnJacWJjY2liazhxNTY3NFZTMzU1Mgo4S0dhVzB4Um01M29hMk44Y1R4WURLVGVqc2RTcTFZeklZd0pSVmNjNS9lSmxNc1lCM1dmMnlmQWY0bFl4WGhvCjV1aHJQNVltN3ovQWVraXJFNFBFV29KVWkzdlN2MjdYeGJiSE9QVUdpVW5lbGV0dEd1NDh5aGhNZEFWNjNicVgKT1p2c0Y4M0F0akhKY2JWdXcvTTNrOUs1Mit5cTBtaE5ONjEvdTVPRjVlczgvYlhuUjBKQjdFTTdQTHd0M3dSdQpwVkdnQ3lmY3U4OGhpWUZLZXA5TlJQOEhEQUtXZFpRc0lQaUVEamI2VERqQ2hWYU5vdnRHKzVsVzYyRjNuODdYCmJQVW82bXY3dTY0UkFvSUJBUUNJY1ZwbnpCK3E5ZmJhaTRmL04vNzRmNTZNQnhYanNMbXBLWUp3L1pXQllONE0KYjhSQnFaZXNUd1RNQ1lrdVNJdVEwSXVqZUIvRnh2QzlLSjEyZ0tNV25YSHQ5VUN6TVF5d2tZdkpwRFBDTVJUYgptTU0yRzVDOGc3YVJFaW5nVWZ6RktzWVp4cE9kcDZkdk9hOHUvY3lyakZjWHR1YzJCemlYVXdTaHpLdEJpUGVkCkdEakQzV1I5TjhQK3g3M2NDaHVzWjV2UERPL05HSlJXeU5yOHVkOWw2UlUwVjA2WTlHclRiZkNaMm9tYU1RMW4KU3o5TXNBbk41RlB6Q2FSRnZmSC9pTVMrUk1jSVM1S0Myb092NGdaSCtGU005WmJzbU1nNGh2M2tiZThoMmlSZQpWK2x2eElEUXlPNGI5NkIvSGRHZEYrTXlveWxtOEtNU2JCcTZWWDI1QW9JQkFRQ093ZmVhNmVRRDVQbUhWZUFtCjc0ZUhmMDFMSlErdFhzTjZML2dlUFllYlRveE8zSGJlSTJ3L25HN3FXSU5sV2N6bnJISGZvUkR6NENYYURwSksKdHJPVDJ2RGY1amd0bmdWbjFyL3NlSVczN21pdW1ZVUIvMnZLcEhLMGRycVVpRUgrcHdqeXQyY3VJSUdzNXovZApnZm9ua3M2THFmNnBhc3g4dk5lM2Y4dFMxWEJlVnUvNEV3Y2luWTBOSVFtYURaREtUaVljWm5WcFFSWlJ3cEg2CmkySitPbEtpcXFQS3pQUXVQWGJOUzArN1ZyOUxLalgxUkFGeGFMT2xvSnhod0tMRjA2R1FDYVkrS0U3VEhURFAKbHFxenQvTnFneFMwM1JhRkY3azlYVzNZeStTUEt3OUx4eE5ESGRET3ZJZlFEM2hSU05kaHRtV1dsbTQvTldsVApQS1p4QW9JQkFHajZKblBuZE5UNzZuaTFCdG1rdk45OWFGRXhEMEFlT3Zza0pvUUg1bjU1WE5TejB4RnBqV091CmN5R0dKa1hDUWRueStrNU5pMWhabWNGNHd4Y3Q3YUMrdDkvY3FhSm1JUVpQbDZQSVkwK0FGRzVRV3VlcnM1T20KUWt2MWQ3dVpLOW5iSEljSS9rYjZ5cDBIRjMySndqL2FsNVhlZVRmWVVJdG15M3hWWHREemxmbFJQc0hjdUtYdApiR1RFbnMvWTFyZFpCbEo4V0plSC8xVEQwZlVESmN5NW9mR3NwaS9zYTV5NkNKM09PdUllOU5YUitDVjZyR01FCndtMCtGU0ZkaFI3eDZmYk1ZcDhLVC9mazlXSlJZUmtrWXQ0cVhaSDRMQXltL3ZHSCtZblVKcDI3UTZXeG5ZMXUKM3FlYmFRbzNvNDZHcWpnN1hubFM0cG9kME1TS1NBYz0KLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQo=
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZlVENDQTJHZ0F3SUJBZ0lVS1czTkQ1UjFZRHVIVmNIQzVadm8wNlFrOUZZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0VqRVFNQTRHQTFVRUF3d0hSR1Z0YnlCRFFUQWdGdzB5TkRBek1qVXdNVEl3TWpoYUdBOHlNVEkwTURNdwpNVEF4TWpBeU9Gb3dKVEVqTUNFR0ExVUVBd3dhYzJGdGNHeGxMWFJsYlhCdkxXOWljMlZ5ZG1GMGIzSnBkVzB3CmdnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUUNGR2ljUWpsNzV0S3NZUFQ1S2xNc2wKdWdQVTZIZUpBR2swbE1QdFlyaUdRNDExRDFlN0V0bTdZS1VTWUpwenR6TUtXZjhtTUdVZkRBeFk5bzNSd0ZiTwpwa3VrSTBGYVduZEI1REVrNEpNVVRSOW9zQkFpaG9lalNzcE1TYWRlK3E2aEM5NGtvMVNjbHB2WjRhdDRzcUVqCmt0UkcrMDJDZlFxVkI0eTk3c3ZQSnl3VzJ2VC9RM016blI2TGNNVXJaMDlFRnRpVDdQeis4VUVHdkxsbW5DTXYKV3BDTWdIeHdBWXltZStqSlBLVkVtVktMN1NSQ29qVVppZjFaYzlPVnllc3FVWDNPTEhkOWwxZThuTWhNdlZJbQp0ejRyeEJNUzg5TTdabldVMW9oU3hmVGczVUdlZ0ZnY2dpWWQ3czNVaTdsYkxRbHdXQkVTUDVNdEh4aXhaQ2Y3Ckp5cWxlM3FKWElaQ1BKZHByczJGL1pVeG9hWlZvN3IzQktTLytYR1Vjb2pYNjVVR25SNU83K1hEWkU1SXYzS3cKSFR0OEYvOXBSYU03eGIycXdxZTlNTU85ZkdLKzMremNlelRZKzZCNXludTBhTTcrR2hpOVFHTkVSaDZiNlhaWQpRSmlSWmtqdWd1cTRFZW4xOUNuK2t1d2o0NE10N1FKNjFZdmN5UEhNZnB0VGNzd01OMFhUZ1F3L25rZmV1RU1aCmkvY2U1Zi9MODlMNHhLV3hjZjlXVXltdzJRUlNMLzFDZUp0Wk1UOThYcDU5TmlXQ0l4cThhQjZJOUdkSkxWNW4KUTdGMHd0bm40SXV0V3BwaUFvVUsxSWFDckl1b3lKRm1iZ0QweFc0cnd3T2t1M0JRUWtjUXVJV25BdTYyWExJcApSajlKcTd4MHFBckw2c1ZYY0pRTitRSURBUUFCbzRHeE1JR3VNQjBHQTFVZERnUVdCQlQxQzR5SkMwRE5CZDhFCkkzZFFLT3FHVjlxYlJEQWZCZ05WSFNNRUdEQVdnQlRldnlmbmhpNHBkZjRWcWdmSnBKSnN4QVdqK0RBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01Gc0dBMVVkRVFSVU1GS0NHbk5oYlhCc1pTMTBaVzF3YnkxdlluTmxjblpoZEc5eQphWFZ0Z2pSellXMXdiR1V0ZEdWdGNHOHRiMkp6WlhKMllYUnZjbWwxYlM1a1pXWmhkV3gwTG5OMll5NWpiSFZ6CmRHVnlMbXh2WTJGc01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQlJTN2IrUGM1NkdzMGxWWHVReTdnbnY2UnEKSmQ3cElyYnR3clBxczlxK3JmRkpKdVQydGQyU2lER2Z1YWlndDhoQVFxZ0NNRFhjeFNYQnNHWmp4V2Nic1pScwpEdFZRY2lYMGdRQ25GOHZSS1d3WmNpUEtwek5sWEo1bjFWek9uc1F5eUhwMGNHN3l6NDY5ZUlncCtuSnEveWlBCmRJVFMyODhRSy9aa0pMNVU4YklHMHZXNFZweTd3cXJQMzh5cy9uN2lKeDl3WDdiMFVma2QwTnVMYklkOFhjb2oKYzVDcTVnUmtEUWN2M3hGS255UHUwQkpNK3FxM1JPWEs0ZXptRDVKUUVqMTlMeS9nOXBwWEhRY1pLaEovT0tyUwpreVhmajZMSkxvN1JFTCt4K3QrcmFpZ2pKY0hwVGxDRWYxQXozbmxxZFZPWWt5SVJQcVRBWm5jZzMvMkFwMWE2CmNkbERwcllEZXVJUlZFVFVuZXdFWU9mWnVtVWR3cHVGQUdLbit5SU5ySEVJVmF4Z1N6WHVib2wzSC94MlVxQ1cKaEh3WFp6eWFmbFpqRHQzWWk2N3Jrdjh2bHZaSlFPK2loK3RXL2FOcjRBWUV1R0U0bHdaTThXWWpKVlFsVEtNeApMVnl3Uyt3NDdMOHFRQzF3Rjcyc1VzOXIrUWw0bDdTNjdzbXQvMENYL0pOTE5aZS9VSkRqdXkwb3BGc0hkbUpYCmhYc0hjTjJOSkxNdlFVMUZqVUtwMDhFMWRwejVBdmVZdE9IOGNkZXVDeGVOaFZJZFhMNmFLMlVuMWZ1bUZjK2gKMEFPMkZEcWdmbjk5WVdKWXJkRUI2L1BvdHlUOEVVMml6WXRiRlFKOHpGZ3NPKytWbGNNSzNnak1QU1J3ZWJRTApFRFRNcUErem5SaXFMVURWUVE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZCekNDQXUrZ0F3SUJBZ0lVWXVaOGRxNDNiTXZHNG5KOTJLMXBGT2VmbllVd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0VqRVFNQTRHQTFVRUF3d0hSR1Z0YnlCRFFUQWdGdzB5TkRBek1qVXdNVEl3TWpkYUdBOHlNVEkwTURNdwpNVEF4TWpBeU4xb3dFakVRTUE0R0ExVUVBd3dIUkdWdGJ5QkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFECmdnSVBBRENDQWdvQ2dnSUJBTDYxdXlTSklGVEMySk14Um9DckJuaU9yZzhLQjQvdDkrODE0YTNXck1XelJwSTYKSmY4MmcxSUVsY0NGS2RBbXA2VG51RlAwQVZIaGVFcndCcWFWcmpYakN6UitGU0N3dmtFTURoZ2NXZHdGQVM3OQpNaExWWXVlQkppZ3MrZDJMc1RqS1pmQm5SZzNTNStBNVNMaWwvK3puRERQaHFGbmR5Tnc3cFZqYldTWjJoR2g4CnFLd05DV05FcGRDS1o4Q2plRDJmMzdJMGhWY3BTak1uemVpMnRyYTc2eE81a0NDWmFINU9OTVUvbUxHWTc3ZEsKSk15Q0JyU2duT1RWV01oWEhINjdsanYvMCtmbDJ5VUdLckt6ODNManZEMGxuZ0dwQTFIR2orYmxmTkgzKzNScQozTmZxSi9RN1g2OWF6TmExeUZ3alJ0WXB1MGtXU0twY3lxbFR0b09PSkRGWTJ5TzdZSUZDL1Z4eFhwMnVTd05UCkVpMXZuL2pzOHRvY3hoSWp6NTluUURtc0hiRmZKWWZrWGpGbWRTaVJrYmRsSDlySkIyL2Mxd1M4a3JUbW5naXgKMFhMODlXVlZtMk9LUVF0cGVnSndncHJrcU84WEUvSjJGNzZhaEhhK1NrTXEyQU53Y2dudFN5NmY3cnY1c0NkZApuVHRLZTd6Mm1DZzRDRTFVUjh3N2ZBRnBab01KYnNNNGhrWmRXZ1Q1Z0xralU2anpCUnlFd29WRjhYa1E0bGlrClBlQ0VFdkFNSGEzY3M0MUtRWnNZSisvTDVvMDFJV0tyTWJGOE9mOXkxeUFuRU9Ua0kvMTF6UlZGa3pQaElOYWQKc2J0M21YaXVBdG5BMzJ4L3dQUE1yNy9Yc3FmOE5XdDVtdFFkeUo1ZDJyYlUxczBjSGhNZms2Ym81RnZMQWdNQgpBQUdqVXpCUk1CMEdBMVVkRGdRV0JCVGV2eWZuaGk0cGRmNFZxZ2ZKcEpKc3hBV2orREFmQmdOVkhTTUVHREFXCmdCVGV2eWZuaGk0cGRmNFZxZ2ZKcEpKc3hBV2orREFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElDQVFDVldvL2Q4c1hnZWFZZkU1UzMyRDlCT2grWk1hSHAyYktvcnJWdGxxdXBiNWEvbUdmWQpIYVpDd2tTZmFyS1JmaEh6cEdiYVl3WkRkV1JaaHRhb0JhVmR3VkRuV3pQcVhLaE9NK2tsOHlmeXNvRXZTQXlVCkdNNmFxS3hrWW9FckxGOTBoL2wrcm44UU01eWZJV0V5RFg4WkU1Y3IzWXdLd0NWTTdmL2tFNlNOMDByNm9YQU0KYS9JVGlFbUlQVUJxQXJiak8zMG56ay9MajZEQXFaeWtCaXhRNVhBaHVSS1FzMDQxNHZXUFhWSUpJUFZzR0ZCVApQc3JKejV3Y3RZYVorRjlzWE9zbmloZGpIZU44cm1oTFI4MjNONFZ1ZFBQdkh3bUxUYTE2N1p4YUs2dG55K2kwCkdOQXdVdEl1dWV4bGJpbDFXYUQxWmlCWlQxQ0hwV3J4bzhNN1kzS0dQR3QwcnhDSGtJOERqaWloTk9QTXg0RGEKQmNNYmdaR3dzZXllWkh3NlVDR0lkZkxTbXdHWXF3R21nSlo1dVNTZW02RWZXamRxZHRtczdITGk1MmphL2dwLwpWM29YNGtmVG96MFBvZ2FTOHVnY2xUdEFxTkpYUmVNMGh3ZmJhTlIrd0FIaGwrZWQ4dldIQm5xSGg0ZjBTZVdvCnVVM0YyWDNqMFlaZUVhKzNWaDBaK0dKYks2STZ0QTd3UnRDbzJFRmtrb25VK0FPaVNwb3p5UjNXeWlWOWlaWDcKWWl2c21HKzlueVRpcTZDeVJSWUlSL2F2cjZVVEkwVHAyL1BjSXVVNDRyTUIzL2NhVTJNblprYUQrRWFZYzl1dgp1ZjV3am9qaVBwLysrNGxHZ0VWSmpPQTdJeTduakxpS2ZvSUFQZ1ZWeTJhZFU0c3QrUkZma3VEMy9BPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
---
# Grant the dev-collector Service Account permission to write traces to the 'dev' tenant
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: allow-write-traces-dev-tenant
rules:
- apiGroups: [tempo.grafana.com]
  resources: [dev]  # tenantName
  resourceNames: [traces]
  verbs: [create]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: allow-write-traces-dev-tenant
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: allow-write-traces-dev-tenant
subjects:
- kind: ServiceAccount
  name: dev-collector
  namespace: chainsaw-multitenancy-openshift
---
# Grant the default Service Account (used by the verify-traces pod) permission to read traces of the 'dev' tenant
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: allow-read-traces-dev-tenant
rules:
- apiGroups: [tempo.grafana.com]
  resources: [dev]  # tenantName
  resourceNames: [traces]
  verbs: [get]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: allow-read-traces-dev-tenant
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: allow-read-traces-dev-tenant
subjects:
- kind: ServiceAccount
  name: default
  namespace: chainsaw-multitenancy-openshift
- kind: Group # for demo purposes via the OAuth web flow, allow all authenticated users to read traces
  apiGroup: rbac.authorization.k8s.io
  name: system:authenticated
---
# Grant the default ServiceAccount (used by the verify-traces pod) view permissions of the chainsaw-multitenancy-openshift namespace.
# If the ServiceAccount cannot access any namespaces, every 'get' request will be denied:
# https://github.com/observatorium/opa-openshift/pull/18/files
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: view
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: view
subjects:
- kind: ServiceAccount
  name: default
  namespace: chainsaw-multitenancy-openshift
